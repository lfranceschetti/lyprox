<!DOCTYPE html>
<html lang="en" class="has-navbar-fixed-top">
{% include 'head.html' %}

{% load static %}
<link rel="stylesheet" href="{% static 'patients/dashboard.css' %}">
<script src="{% static 'patients/dashboard.js' %}"></script>

{% load mytags %}

<body>
    {% include 'navbar.html' %}

    <form method="POST" action="{% url 'patients:dashboard' %}" name="dashboardform">
    {% csrf_token %}
        <section class="section columns is-multiline">
            
            <div class="column is-3-widescreen">
                <div class="columns is-multiline" id="control-column">
                    <div class="column is-full-widescreen">
                        <div class="box">
                            <div class="level">
                                <div class="level-left">
                                    <div class="level-item">
                                        <p class="title is-4">Patient details</p>
                                    </div>
                                </div>
                                <div class="level-right">
                                    <div class="level-item has-tooltip-left" data-tooltip="Specify which patients to consider">
                                        <span class="icon">
                                            <i class="fas fa-question"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
        
                            <div class="columns is-multiline">
                                <div class="column">
                                    <p class="heading has-text-centered">smoking status</p>
                                    <div class="field has-addons is-justify-content-center">
                                        {% for radio in form.nicotine_abuse %}
                                        <div class="control">
                                            {{ radio.tag }}
                                            <label for="{{ radio.id_for_label }}" class="tag button is-info {{ radio.choice_label }}">
                                                <i class="fas fa-lg fa-{{ radio.choice_label }}"></i>
                                            </label>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
        
                                <div class="column">
                                    <p class="heading has-text-centered">HPV status</p>
                                    <div class="field has-addons is-justify-content-center">
                                        {% for radio in form.hpv_status %}
                                        <div class="control">
                                            {{ radio.tag }}
                                            <label for="{{ radio.id_for_label }}" class="tag button is-info {{ radio.choice_label }}">
                                                <i class="fas fa-lg fa-{{ radio.choice_label }}"></i>
                                            </label>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
        
                                <div class="column">
                                    <p class="heading has-text-centered">neck dissection</p>
                                    <div class="field has-addons is-justify-content-center">
                                        {% for radio in form.neck_dissection %}
                                        <div class="control">
                                            {{ radio.tag }}
                                            <label for="{{ radio.id_for_label }}" class="tag button is-info {{ radio.choice_label }}">
                                                <i class="fas fa-lg fa-{{ radio.choice_label }}"></i>
                                            </label>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="column is-full-widescreen">
                        <div class="box">
                            <div class="level">
                                <div class="level-left">
                                    <div class="level-item">
                                        <p class="title is-4">Primary tumor</p>
                                    </div>
                                </div>
                                <div class="level-right">
                                    <div class="level-item has-tooltip-left has-tooltip-multiline" data-tooltip="Of the selected patients, consider only those that have primary tumors matching the selection in this box">
                                        <span class="icon">
                                            <i class="fas fa-question"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="columns is-multiline">
                                <div class="column is-full-widescreen">
                                    <p class="title is-5">Lateralization</p>
        
                                    <div class="columns is-multiline">
                                        <div class="column">
                                            <p class="heading has-text-centered">central</p>
                                            <div class="field has-addons is-justify-content-center">
                                                {% for radio in form.central %}
                                                <p class="control">
                                                    {{ radio.tag }}
                                                    <label for="{{ radio.id_for_label }}" class="tag button is-info {{ radio.choice_label }}">
                                                        <i class="fas fa-lg fa-{{ radio.choice_label }}"></i>
                                                    </label>
                                                </p>
                                                {% endfor %}
                                            </div>
                                        </div>
                
                                        <div class="column">
                                            <p class="heading has-text-centered">midline extension</p>
                                            <div class="field has-addons is-justify-content-center">
                                                {% for radio in form.midline_extension %}
                                                <p class="control">
                                                    {{ radio.tag }}
                                                    <label for="{{ radio.id_for_label }}" class="tag button is-info {{ radio.choice_label }}">
                                                        <i class="fas fa-lg fa-{{ radio.choice_label }}"></i>
                                                    </label>
                                                </p>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="column is-full-widescreen">
                                    <p class="title is-5">Subsite</p>
                                    {% for checkbox in form.subsites %}
                                    <div class="field is-grouped">
                                        <div class="control is-expanded">
                                            {{ checkbox.tag }}
                                            <label for="{{ checkbox.id_for_label }}" class="button is-primary is-light is-fullwidth">
                                                <span>{{ checkbox.choice_label }}</span>
                                            </label>
                                        </div>
                                        <div class="control">
                                            <p class="button is-info no-pointer">
                                                <span>{{ stats.subsites|index:forloop.counter0 }}</span>
                                            </p>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>

                                <div class="column is-full-widescreen">
                                    <p class="title is-5">T-stage</p>
                                    {% for checkbox in form.tstages %}
                                    <div class="field is-grouped">
                                        <div class="control is-expanded">
                                            {{ checkbox.tag }}
                                            <label for="{{ checkbox.id_for_label }}" class="button is-primary is-light is-fullwidth">
                                                <span>{{ checkbox.choice_label }}</span>
                                            </label>
                                        </div>
                                        <div class="control">
                                            <p class="button is-info no-pointer">
                                                <span>{{ stats.t_stages|index:forloop.counter0 }}</span>
                                            </p>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="column is-9-widescreen">
                <div class="box">
                    <div class="level">
                        <div class="level-left">
                            <div class="level-item">
                                <p class="title is-4">Modalities</p>
                            </div>
                        </div>
                        <div class="level-right">
                            <div class="level-item has-tooltip-left has-tooltip-multiline" data-tooltip="Select the diagnostic modalities to consider in this dashboard and how to combine them">
                                <span class="icon">
                                    <i class="fas fa-question"></i>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="columns is-multiline">
                        {% for checkbox in form.modalities %}
                        <div class="column">
                            {{ checkbox.tag }}
                            <label for="{{ checkbox.id_for_label }}" class="button is-primary is-light is-fullwidth">
                                <span>{{ checkbox.choice_label }}</span>
                            </label>
                        </div>
                        {% endfor %}

                        <div class="column is-1">
                            <div class="select">
                                {{ form.modality_combine }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="columns">
                    <div class="column">
                        <div class="box">
                            <p class="title is-4 has-text-centered">contralateral</p>
                            <table class="table is-fullwidth">
                                <tbody>
                                    <tr>
                                        <td rowspan="3">I</td>
                                        <td>both</td>
                                        {% include 'patients/lnlrow.html' with lnl="I contralateral" radiobuttons=form.contra_I stat=stats.contra_I %}
                                    </tr>
                                    <tr>
                                        <td>a</td>
                                        {% include 'patients/lnlrow.html' with lnl="Ia contralateral" radiobuttons=form.contra_Ia stat=stats.contra_Ia %}
                                    </tr>
                                    <tr>
                                        <td>b</td>
                                        {% include 'patients/lnlrow.html' with lnl="Ib contralateral" radiobuttons=form.contra_Ib stat=stats.contra_Ib %}
                                    </tr>
                                    <tr>
                                        <td rowspan="3">II</td>
                                        <td>both</td>
                                        {% include 'patients/lnlrow.html' with lnl="II contralateral" radiobuttons=form.contra_II stat=stats.contra_II %}
                                    </tr>
                                    <tr>
                                        <td>a</td>
                                        {% include 'patients/lnlrow.html' with lnl="IIa contralateral" radiobuttons=form.contra_IIa stat=stats.contra_IIa %}
                                    </tr>
                                    <tr>
                                        <td>b</td>
                                        {% include 'patients/lnlrow.html' with lnl="IIb contralateral" radiobuttons=form.contra_IIb stat=stats.contra_IIb %}
                                    </tr>
                                    <tr>
                                        <td colspan="2">III</td>
                                        {% include 'patients/lnlrow.html' with lnl="III contralateral" radiobuttons=form.contra_III stat=stats.contra_III %}
                                    </tr>
                                    <tr>
                                        <td colspan="2">IV</td>
                                        {% include 'patients/lnlrow.html' with lnl="IV contralateral" radiobuttons=form.contra_IV stat=stats.contra_IV %}
                                    </tr>
                                    <tr>
                                        <td colspan="2">V</td>
                                        {% include 'patients/lnlrow.html' with lnl="V contralateral" radiobuttons=form.contra_V stat=stats.contra_V %}
                                    </tr>
                                    <tr>
                                        <td colspan="2">VII</td>
                                        {% include 'patients/lnlrow.html' with lnl="VII contralateral" radiobuttons=form.contra_VII stat=stats.contra_VII %}
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="column">
                        <div class="box">
                            <p class="title is-4 has-text-centered">ipsilateral</p>
                            <table class="table is-fullwidth">
                                <tbody>
                                    <tr>
                                        <td rowspan="3">I</td>
                                        <td>both</td>
                                        {% include 'patients/lnlrow.html' with lnl="I ipsilateral" radiobuttons=form.ipsi_I stat=stats.ipsi_I %}
                                    </tr>
                                    <tr>
                                        <td>a</td>
                                        {% include 'patients/lnlrow.html' with lnl="Ia ipsilateral" radiobuttons=form.ipsi_Ia stat=stats.ipsi_Ia %}
                                    </tr>
                                    <tr>
                                        <td>b</td>
                                        {% include 'patients/lnlrow.html' with lnl="Ib ipsilateral" radiobuttons=form.ipsi_Ib stat=stats.ipsi_Ib %}
                                    </tr>
                                    <tr>
                                        <td rowspan="3">II</td>
                                        <td>both</td>
                                        {% include 'patients/lnlrow.html' with lnl="II ipsilateral" radiobuttons=form.ipsi_II stat=stats.ipsi_II %}
                                    </tr>
                                    <tr>
                                        <td>a</td>
                                        {% include 'patients/lnlrow.html' with lnl="IIa ipsilateral" radiobuttons=form.ipsi_IIa stat=stats.ipsi_IIa %}
                                    </tr>
                                    <tr>
                                        <td>b</td>
                                        {% include 'patients/lnlrow.html' with lnl="IIb ipsilateral" radiobuttons=form.ipsi_IIb stat=stats.ipsi_IIb %}
                                    </tr>
                                    <tr>
                                        <td colspan="2">III</td>
                                        {% include 'patients/lnlrow.html' with lnl="III ipsilateral" radiobuttons=form.ipsi_III stat=stats.ipsi_III %}
                                    </tr>
                                    <tr>
                                        <td colspan="2">IV</td>
                                        {% include 'patients/lnlrow.html' with lnl="IV ipsilateral" radiobuttons=form.ipsi_IV stat=stats.ipsi_IV %}
                                    </tr>
                                    <tr>
                                        <td colspan="2">V</td>
                                        {% include 'patients/lnlrow.html' with lnl="V ipsilateral" radiobuttons=form.ipsi_V stat=stats.ipsi_V %}
                                    </tr>
                                    <tr>
                                        <td colspan="2">VII</td>
                                        {% include 'patients/lnlrow.html' with lnl="VII ipsilateral" radiobuttons=form.ipsi_VII stat=stats.ipsi_VII %}
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="box">
                    <div class="level">
                        <div class="level-left">
                            
                        </div>
                        <div class="level-right">
                            <div class="level-item">
                                <div class="button is-medium no-pointer">
                                    <span>Patients in selection: {{ stats.total }}</span>
                                </div>
                            </div>

                            <div class="level-item">
                                <button type="submit" class="button is-medium is-warning" data-tooltip="Test">
                                    <span class="icon">
                                        <i class="fas fa-cogs"></i>
                                    </span>
                                    <span><strong>Compute</strong></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </form>

    {% include 'footer.html' %}
</body>
</html>